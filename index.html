<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Painel de Ligação</title>

<style>
body{
  margin:0;
  background:#0f172a;
  font-family:Arial, sans-serif;
  color:white;
}

/* Painel flutuante */
.call-panel{
  position:fixed;
  bottom:20px;
  right:20px;
  width:260px;
  background:#1e293b;
  border-radius:16px;
  box-shadow:0 10px 30px rgba(0,0,0,.4);
  padding:15px;
  z-index:9999;
  cursor:grab;
  transition:.3s;
}

.call-panel.minimized{
  height:50px;
  overflow:hidden;
}

.call-header{
  font-weight:bold;
  margin-bottom:10px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.controls{
  display:flex;
  justify-content:space-between;
  margin-top:10px;
}

button{
  flex:1;
  margin:5px;
  padding:8px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  font-weight:bold;
  transition:.2s;
}

.mute{ background:#334155; color:white; }
.end{ background:#ef4444; color:white; }
.pip{ background:#22c55e; color:black; }

button:hover{
  transform:scale(1.05);
}
</style>
</head>
<body>

<video id="video" width="1" height="1" autoplay muted loop style="display:none">
  <source src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
</video>

<div class="call-panel" id="panel">
  <div class="call-header">
    Ligação Ativa
    <span id="toggle">—</span>
  </div>
  <div class="controls">
    <button class="mute" onclick="toggleMute()">Mute</button>
    <button class="pip" onclick="ativarPiP()">PiP</button>
    <button class="end" onclick="encerrar()">End</button>
  </div>
</div>

<script>
const panel = document.getElementById("panel");
const toggleBtn = document.getElementById("toggle");
const video = document.getElementById("video");

/* Minimizar */
toggleBtn.onclick = () => {
  panel.classList.toggle("minimized");
  toggleBtn.textContent = panel.classList.contains("minimized") ? "+" : "—";
};

/* Arrastar */
let isDragging = false, offsetX, offsetY;

panel.addEventListener("mousedown", e => {
  isDragging = true;
  offsetX = e.clientX - panel.getBoundingClientRect().left;
  offsetY = e.clientY - panel.getBoundingClientRect().top;
  panel.style.cursor = "grabbing";
});

document.addEventListener("mousemove", e => {
  if(isDragging){
    panel.style.left = e.clientX - offsetX + "px";
    panel.style.top = e.clientY - offsetY + "px";
    panel.style.right = "auto";
    panel.style.bottom = "auto";
  }
});

document.addEventListener("mouseup", () => {
  isDragging = false;
  panel.style.cursor = "grab";
});

/* Funções */
function toggleMute(){
  alert("Microfone alternado (simulação)");
}

function encerrar(){
  panel.style.display = "none";
  alert("Ligação encerrada");
}

async function ativarPiP(){
  if(document.pictureInPictureEnabled){
    await video.requestPictureInPicture();
  } else {
    alert("PiP não suportado nesse navegador.");
  }
}
</script>

</body>
</html>